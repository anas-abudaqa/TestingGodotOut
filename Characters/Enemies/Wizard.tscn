[gd_scene load_steps=37 format=3 uid="uid://c72j371oc2uhu"]

[ext_resource type="Script" path="res://Characters/Enemies/Scripts/Wizard.gd" id="1_akiwq"]
[ext_resource type="Texture2D" uid="uid://bjpkio55x44ht" path="res://Art/6 Deceased/Deceased_attack.png" id="1_olkng"]
[ext_resource type="Texture2D" uid="uid://bkov52thgrqhw" path="res://Art/6 Deceased/Deceased_death.png" id="2_jvk8w"]
[ext_resource type="Texture2D" uid="uid://bsnj5enehhqq8" path="res://Art/6 Deceased/Deceased_hurt.png" id="3_wl22o"]
[ext_resource type="Texture2D" uid="uid://b4r2c8ei0b8l7" path="res://Art/6 Deceased/Deceased_idle.png" id="4_8gy84"]
[ext_resource type="Texture2D" uid="uid://bibwt267nu17o" path="res://Art/6 Deceased/Deceased_walk.png" id="5_7jr6e"]
[ext_resource type="Script" path="res://Characters/Enemies/Scripts/WizardStateMachine.gd" id="7_veirj"]
[ext_resource type="Script" path="res://Characters/Enemies/Scripts/WizardIdle.gd" id="8_5uh0x"]
[ext_resource type="Script" path="res://Characters/Enemies/Scripts/WizardWalk.gd" id="9_imgfe"]
[ext_resource type="Script" path="res://Characters/Enemies/Scripts/WizardAttack.gd" id="10_6gras"]
[ext_resource type="Script" path="res://Characters/Enemies/Scripts/WizardHurt.gd" id="11_nyjta"]
[ext_resource type="PackedScene" uid="uid://b0glgx3pu4xre" path="res://Components/health&shield_component.tscn" id="12_nvktw"]

[sub_resource type="AtlasTexture" id="AtlasTexture_vuyhv"]
atlas = ExtResource("1_olkng")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_jppv8"]
atlas = ExtResource("1_olkng")
region = Rect2(48, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_hoeie"]
atlas = ExtResource("1_olkng")
region = Rect2(96, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_05m0r"]
atlas = ExtResource("1_olkng")
region = Rect2(144, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_h231y"]
atlas = ExtResource("2_jvk8w")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_4xej7"]
atlas = ExtResource("2_jvk8w")
region = Rect2(48, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_p8xtk"]
atlas = ExtResource("2_jvk8w")
region = Rect2(96, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_2ufkj"]
atlas = ExtResource("2_jvk8w")
region = Rect2(144, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_bkxqk"]
atlas = ExtResource("2_jvk8w")
region = Rect2(192, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_yfcd4"]
atlas = ExtResource("2_jvk8w")
region = Rect2(240, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_x8goj"]
atlas = ExtResource("3_wl22o")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_04qyq"]
atlas = ExtResource("3_wl22o")
region = Rect2(48, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_d1g5k"]
atlas = ExtResource("4_8gy84")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_j32f5"]
atlas = ExtResource("4_8gy84")
region = Rect2(48, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_c5s5b"]
atlas = ExtResource("4_8gy84")
region = Rect2(96, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_r4jdv"]
atlas = ExtResource("4_8gy84")
region = Rect2(144, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_tie46"]
atlas = ExtResource("5_7jr6e")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_4dih8"]
atlas = ExtResource("5_7jr6e")
region = Rect2(48, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_rkt1l"]
atlas = ExtResource("5_7jr6e")
region = Rect2(96, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_3kpys"]
atlas = ExtResource("5_7jr6e")
region = Rect2(144, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_0kicp"]
atlas = ExtResource("5_7jr6e")
region = Rect2(192, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_x1d10"]
atlas = ExtResource("5_7jr6e")
region = Rect2(240, 0, 48, 48)

[sub_resource type="SpriteFrames" id="SpriteFrames_ufmsr"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_vuyhv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jppv8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hoeie")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_05m0r")
}],
"loop": false,
"name": &"Attack",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_h231y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4xej7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_p8xtk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2ufkj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bkxqk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yfcd4")
}],
"loop": true,
"name": &"Death",
"speed": 6.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_x8goj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_04qyq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_x8goj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_04qyq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_x8goj")
}],
"loop": false,
"name": &"Hurt",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_d1g5k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_j32f5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_c5s5b")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_r4jdv")
}],
"loop": true,
"name": &"Idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_tie46")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4dih8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rkt1l")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3kpys")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0kicp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_x1d10")
}],
"loop": true,
"name": &"Walk",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2csa6"]
size = Vector2(29, 53)

[node name="Wizard" type="CharacterBody2D"]
collision_layer = 4
collision_mask = 35
script = ExtResource("1_akiwq")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
scale = Vector2(1.5, 1.5)
sprite_frames = SubResource("SpriteFrames_ufmsr")
animation = &"Hurt"
frame = 4
frame_progress = 1.0

[node name="Hitbox" type="CollisionShape2D" parent="."]
position = Vector2(17.5, 8.5)
shape = SubResource("RectangleShape2D_2csa6")

[node name="CharacterStateMachine" type="Node" parent="." node_paths=PackedStringArray("animated_sprite", "character", "initial_state") groups=["Damageable"]]
script = ExtResource("7_veirj")
animated_sprite = NodePath("../AnimatedSprite2D")
character = NodePath("..")
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="CharacterStateMachine" node_paths=PackedStringArray("walk_state", "hurt_state")]
script = ExtResource("8_5uh0x")
walk_state = NodePath("../Walk")
hurt_state = NodePath("../Hurt")

[node name="Walk" type="Node" parent="CharacterStateMachine" node_paths=PackedStringArray("attack_state", "hurt_state", "idle_state")]
script = ExtResource("9_imgfe")
attack_state = NodePath("../Attack")
hurt_state = NodePath("../Hurt")
idle_state = NodePath("../Idle")

[node name="Attack" type="Node" parent="CharacterStateMachine" node_paths=PackedStringArray("idle_state", "hurt_state")]
script = ExtResource("10_6gras")
idle_state = NodePath("../Idle")
hurt_state = NodePath("../Hurt")

[node name="CooldownTimer" type="Timer" parent="CharacterStateMachine/Attack"]

[node name="WindupTimer" type="Timer" parent="CharacterStateMachine/Attack"]
wait_time = 0.6

[node name="Hurt" type="Node" parent="CharacterStateMachine" node_paths=PackedStringArray("idle_state")]
script = ExtResource("11_nyjta")
idle_state = NodePath("../Idle")

[node name="HealthAndShieldNode" parent="." instance=ExtResource("12_nvktw")]

[connection signal="timeout" from="CharacterStateMachine/Attack/CooldownTimer" to="CharacterStateMachine/Attack" method="_on_cooldown_timer_timeout"]
[connection signal="timeout" from="CharacterStateMachine/Attack/WindupTimer" to="CharacterStateMachine/Attack" method="_on_windup_timer_timeout"]
[connection signal="has_died" from="HealthAndShieldNode" to="." method="_on_health_and_shield_node_has_died"]
[connection signal="health_changed" from="HealthAndShieldNode" to="." method="_on_health_and_shield_node_health_changed"]
